!function(e){"use strict";if(void 0===e)throw Error("Geetest requires browser environment");var t=e.document,n=e.Math,o=t.getElementsByTagName("head")[0];function r(e){this._obj=e}function a(e){var t=this;new r(e)._each(function(e,n){t[e]=n})}r.prototype={_each:function(e){var t=this._obj;for(var n in t)t.hasOwnProperty(n)&&e(n,t[n]);return this}},a.prototype={api_server:"api.geetest.com",protocol:"http://",typePath:"/gettype.php",fallback_config:{slide:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"slide",slide:"/static/js/geetest.0.0.0.js"},fullpage:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"fullpage",fullpage:"/static/js/fullpage.0.0.0.js"}},_get_fallback_config:function(){return i(this.type)?this.fallback_config[this.type]:this.new_captcha?this.fallback_config.fullpage:this.fallback_config.slide},_extend:function(e){var t=this;new r(e)._each(function(e,n){t[e]=n})}};var i=function(e){return"string"==typeof e},c=function(e){return"object"==typeof e&&null!==e},s=/Mobi/i.test(navigator.userAgent)?3:0,l={},f={},u=function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,o=e.getDate(),r=e.getHours(),a=e.getMinutes(),i=e.getSeconds();return n>=1&&n<=9&&(n="0"+n),o>=0&&o<=9&&(o="0"+o),r>=0&&r<=9&&(r="0"+r),a>=0&&a<=9&&(a="0"+a),i>=0&&i<=9&&(i="0"+i),t+"-"+n+"-"+o+" "+r+":"+a+":"+i},g=function(e,n){var r=t.createElement("script");r.charset="UTF-8",r.async=!0,/static\.geetest\.com/g.test(e)&&(r.crossOrigin="anonymous"),r.onerror=function(){n(!0)};var a=!1;r.onload=r.onreadystatechange=function(){a||r.readyState&&"loaded"!==r.readyState&&"complete"!==r.readyState||(a=!0,setTimeout(function(){n(!1)},0))},r.src=e,o.appendChild(r)},p=function(e){if(!e)return"";var t="?";return new r(e)._each(function(e,n){var o,r;(i(n)||"number"==typeof(o=n)||"boolean"==typeof(r=n))&&(t=t+encodeURIComponent(e)+"="+encodeURIComponent(n)+"&")}),"?"===t&&(t=""),t.replace(/&$/,"")},d=function(e,t,n,o){t=(r=t).replace(/^https?:\/\/|\/$/g,"");var r,a,i=(0!==(a=(a=n).replace(/\/+/g,"/")).indexOf("/")&&(a="/"+a),a+p(o));return t&&(i=e+t+i),i},h=function(e,t,n,o,r,a,i){var c=function(s){var l=d(n,o[s],r,a);g(l,function(a){a?s>=o.length-1?(i(!0),t&&(e.error_code=508,v(e,n+o[s]+r))):c(s+1):i(!1)})};c(0)},$=function(t,o,r,a){if(c(r.getLib)){r._extend(r.getLib),a(r);return}if(r.offline){a(r._get_fallback_config());return}var i="geetest_"+(parseInt(1e4*n.random())+new Date().valueOf());e[i]=function(t){"success"==t.status?a(t.data):t.status?a(r._get_fallback_config()):a(t),e[i]=void 0;try{delete e[i]}catch(n){}},h(r,!0,r.protocol,t,o,{gt:r.gt,callback:i},function(e){e&&a(r._get_fallback_config())})},v=function(e,t){h(e,!1,e.protocol,["monitor.geetest.com"],"/monitor/send",{time:u(),captcha_id:e.gt,challenge:e.challenge,pt:s,exception_url:t,error_code:e.error_code},function(e){})},y=function(e,t){var n={networkError:"网络错误",gtTypeError:"gt字段不是字符串类型"};if("function"==typeof t.onError)t.onError(n[e]);else throw Error(n[e])};(e.Geetest||t.getElementById("gt_lib"))&&(f.slide="loaded"),e.initGeetest=function(t,n){var o=new a(t);t.https?o.protocol="https://":t.protocol||(o.protocol=e.location.protocol+"//"),("050cffef4ae57b5d5e529fea9540b0d1"===t.gt||"3bd38408ae4af923ed36e13819b14d42"===t.gt)&&(o.apiserver="yumchina.geetest.com/",o.api_server="yumchina.geetest.com"),t.gt&&(e.GeeGT=t.gt),t.challenge&&(e.GeeChallenge=t.challenge),c(t.getType)&&o._extend(t.getType),$(o.api_server_v3||[o.api_server||o.apiserver],o.typePath,o,function(t){var r=t.type,a=function(){o._extend(t),n(new e.Geetest(o))};l[r]=l[r]||[];var i=f[r]||"init";"init"===i?(f[r]="loading",l[r].push(a),h(o,!0,o.protocol,t.static_servers||t.domains,t[r]||t.path,null,function(e){if(e)f[r]="fail",y("networkError",o);else{f[r]="loaded";for(var t=l[r],n=0,a=t.length;n<a;n+=1){var i,c=t[n];"function"==typeof(i=c)&&c()}l[r]=[]}})):"loaded"===i?a():"fail"===i?y("networkError",o):"loading"===i&&l[r].push(a)})}}(window);